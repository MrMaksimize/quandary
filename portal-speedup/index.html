<!DOCTYPE html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><title>A Faster Data Portal</title><meta name=description content="Hey San Diego!  Your open data portal just got a LOT faster!One of the reasons we wanted to run our own data portal is the flexibility we have to change it and add functionality.Today, we&rsquo;re ..."><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=black-translucent><meta name=twitter:card content="summary"><meta name=twitter:site content="@MrMaksimize"><meta name=twitter:title content="A Faster Data Portal"><meta name=twitter:image content="http://quandary.io/assets/images/logo_white.png"><meta name=twitter:description content="Hey San Diego!  Your open data portal just got a LOT faster!One of the reasons we wanted to run our own data portal is the flexibility we have to change it and add functionality.Today, we&rsquo;re ..."><meta property=og:site_name content="Quandary."><meta property=og:title content="A Faster Data Portal"><meta property=og:description content="Hey San Diego!  Your open data portal just got a LOT faster!One of the reasons we wanted to run our own data portal is the flexibility we have to change it and add functionality.Today, we&rsquo;re ..."><meta property=og:image content="http://quandary.io/assets/images/lighthouse-report-final.jpg"><meta property=og:url content="http://quandary.io/portal-speedup/"><meta property=og:type content="blog"><meta property=article:published_time content=2017-04-19T00:00:00+00:00><link rel=canonical href="http://quandary.io/portal-speedup/"><link rel="shortcut icon" href=/assets/images/favicon.png type="image/png"><link rel=stylesheet href=//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i><link href=//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css rel=stylesheet><link href="//fonts.googleapis.com/css?family=Merriweather" rel=stylesheet type=text/css><link href="//fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet type=text/css><link rel=alternate type=application/rss+xml title=RSS href=/atom.xml><link rel=stylesheet type=text/css media=screen href="/css/main.css"><link rel=stylesheet type=text/css media=print href="/css/print.css"></head><body itemscope itemtype=http://schema.org/Article><a href="/" class=logo-readium><span class=logo style="background-image: url(/assets/images/logo_white.png)"></span></a><main class=content role=main><article class=post><div class=article-image><div class=post-image-image style="background-image: url(/assets/images/lighthouse-report-final.jpg)">Article Image</div><div class=post-image-image2 style="background-image: url()">Article Image</div><div class=post-meta><h1 class=post-title>A Faster Data Portal</h1><div class="cf post-meta-text"><div class=author-image style="background-image: url(/assets/images/author.jpg)">Blog Logo</div><h4 class=author-name itemprop=author itemscope itemtype=http://schema.org/Person>Maksim Pecherskiy</h4>on <time datetime="2017-04-19 00:00">19 Apr 2017</time></div><div style=text-align:center><a href=#topofpage class=topofpage><i class="fa fa-angle-down"></i></a></div></div></div><section class=post-content><div class=post-reading><span class=post-reading-time></span> read</div><a name=topofpage></a><p>Hey San Diego! Your open data portal just got a LOT faster!</p><p>One of the reasons we wanted to <a href=https://data.sandiego.gov/stories/portal-refresh>run our own data portal</a> is the flexibility we have to change it and add functionality.</p><p>Today, we&rsquo;re putting the pedal to the metal on those desires. We initially launched the portal based on JKAN, but with modified schemas, layouts, and branding. Because of how fast we moved, we put off thinking about speed and performance.</p><p>Since the dust settled a bit, we had a chance to do that.</p><p><a href="https://developers.google.com/web/tools/lighthouse/">Lighthouse</a> is a tool developed by Google to test web pages for performance, accessibility, and more. The first time we ran it against our portal, here&rsquo;s what we got: <img src=/assets/images/lighthouse-previous.jpg alt="Click to see full report"></p><p><a href=http://theia.datasd.org.s3.amazonaws.com/data.sandiego.gov_2017-03-02_19-26-42.html>See full report</a></p><p>30 out of 100, with a lot of marks against the portal due to loading speed. Time to first paint is a metric that measures when the primary content of a page is visible. That number means it took 5.3 seconds after you navigated to the portal for anything to show up.</p><p>We did badly on plenty of other metrics, including SSL encryption (HTTPS) and offline browsing.</p><p>So why does this matter (besides our obsessive perfectionism)? KissMetrics has a <a href="https://blog.kissmetrics.com/loading-time/?wide=1">great infographic about this</a>:</p><p><img src=/assets/images/kissmetrics-loading.jpg alt="Loading Time"></p><p>In short, we were losing an estimated 25 percent of portal users because of the page loading speed. Not good.</p><p>My friend and former Code for America co-fellow <a href=http://twitter.com/davidleonardii>David Leonard</a> (who also got me into Polymer components that the <a href=https://data.sandiego.gov/stories/portal-refresh>portal heavily uses</a> ) helped me analyze where the bottlenecks were in our page loading time and gave me some tips about how to speed up the portal.</p><p>We implemented https and service workers (for security and offline browsing and caching) and optimized how components load. The portal is now encrypted, and you can browse it offline.</p><p>I&rsquo;m not going to go into too much detail, but you can <a href=https://github.com/cityofsandiego/seaboard/pull/140>see the pull request here</a>. We tested again and got a score of 96:</p><p><img src=/assets/images/lighthouse-report-final.jpg alt="New Lighthouse"></p><p><a href=http://theia.datasd.org.s3.amazonaws.com/data.sandiego.gov_2017-04-12_18-17-58.html>See full report</a></p><p>Let me use a few buzzwords to describe what happened here, for those fond of them:</p><p><strong><em>We used an agile process to iterate on the technology underlying the performance, availability, and scalability of our portal architecture to decrease page loading speed, increase cybersecurity, and improve an already great product with enhanced user experience.</em></strong></p><p>Or in English:</p><p><strong><em>We did a thing that most organizations do: we improved something we launched, because no one ever gets everything right the first time. We&rsquo;ll do it again, and again, and again. This is just the first of many changes and enhancements we will be making.</em></strong></p><p>Enjoy your [faster] portal, San Diego!</p></section><footer class=post-footer><section class=share></section></footer><div class="bottom-teaser cf"><div class=isLeft><h5 class="index-headline featured"><span>Written by</span></h5><section class=author><div class=author-image style="background-image: url(/assets/images/author.jpg)">Blog Logo</div><h4>Maksim Pecherskiy</h4><p class=bio></p><hr><p class=published>Published <time datetime="2017-04-19 00:00">19 Apr 2017</time></p></section></div><div class=isRight><h5 class="index-headline featured"><span>Supported by</span></h5><footer class=site-footer><section class=poweredby>Proudly published with <a href=http://jekyllrb.com>Jekyll</a></section><a class=subscribe href=/feed.xml><span class=tooltip><i class="fa fa-rss"></i> You should subscribe to my feed.</span></a><div class=inner><section class=copyright>All content copyright <a href="/">Maksim Pecherskiy</a> &copy; 2017<br>All rights reserved.</section></div></footer></div></div></article></main><div class=bottom-closer><div class=background-closer-image style="background-image: url(/assets/images/harddrive.jpg)">Image</div><div class=inner><h1 class=blog-title>Quandary.</h1><h2 class=blog-description>An Experiment</h2><a href="/" class=btn>Back to Overview</a></div></div><script src=https://code.jquery.com/jquery-1.11.1.min.js></script><script type=text/javascript src=/assets/js/jquery.fitvids.js></script><script type=text/javascript src=/assets/js/index.js></script><script type=text/javascript src=/assets/js/readingTime.min.js></script><script>(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    
      $window.on('scroll', function() {
        var top = $window.scrollTop();

        if (top < 0 || top > 1500) { return; }
        $image
          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
          .css('opacity', 1-Math.max(top/700, 0));
      });
      $window.trigger('scroll');

      var height = $('.article-image').height();
      $('.post-content').css('padding-top', height + 'px');

      $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
          if (target.length) {
            $('html,body').animate({ scrollTop: target.offset().top }, 500);
            return false;
          }
        }
      });

  });
}(jQuery));</script></body></html>